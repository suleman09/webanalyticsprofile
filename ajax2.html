<!DOCTYPE html>
<html>
<head>
	<title>Registration Page</title>
	<script>
		// Sample usernames
		var usernames = ["john", "jane", "jim"];

		// Function to validate form
		function validateForm() {
			// Get form values
			var name = document.getElementById("name").value;
			var college = document.getElementById("college").value;
			var username = document.getElementById("username").value;
			var password = document.getElementById("password").value;
			var password2 = document.getElementById("password2").value;
			var message = document.getElementById("message");

			// Check if name field is empty
			if (name == "") {
				message.innerHTML = "Name field cannot be empty.";
				return false;
			}

			// Check if retyped password matches
			if (password != password2) {
				message.innerHTML = "Passwords do not match.";
				return false;
			}

			// Check if username is unique
			if (usernames.includes(username)) {
				message.innerHTML = "Username already exists.";
				return false;
			} else {
				// Simulate successful registration
				message.innerHTML = "Successfully Registered.";
				// Add username to list of usernames
				usernames.push(username);
			}

			// Return false to prevent form from submitting
			return false;
		}

		// Function to get college suggestions
		function suggestColleges() {
			// Get college input field and value
			var collegeInput = document.getElementById("college");
			var collegeValue = collegeInput.value;

			// Create XMLHttpRequest object
			var xhr = new XMLHttpRequest();

			// Callback function to handle server response
			xhr.onreadystatechange = function() {
				if (xhr.readyState == 4 && xhr.status == 200) {
					// Parse JSON response
					var response = JSON.parse(xhr.responseText);

					// Get college suggestions container and clear previous suggestions
					var suggestionsContainer = document.getElementById("suggestions");
					suggestionsContainer.innerHTML = "";

					// Display each suggestion in a list item
					response.forEach(function(college) {
						var suggestion = document.createElement("li");
						suggestion.innerHTML = college.name;
						suggestionsContainer.appendChild(suggestion);
					});

					// Show suggestions container
					suggestionsContainer.style.display = "block";
				}
			};

			// Open XMLHttpRequest to get college suggestions from server
			xhr.open("GET", "colleges.php?q=" + collegeValue, true);
			xhr.send();
		}
	</script>
</head>
<body>
	<h2>Registration Page</h2>
	<form onsubmit="return validateForm()">
		<label for="name">Name:</label>
		<input type="text" id="name" name="name"><br><br>

		<label for="college">College:</label>
		<input type="text" id="college" name="college" autocomplete="on" onkeyup="suggestColleges()"><br>
		<ul id="suggestions" style="display: none;"></ul>
		<br>

		<label for="username">Username:</label>
		<input type="text" id="username" name="username"><br><br>

		<label for="password">Password:</label>
		<input type="password" id="password" name="password"><br><br>

		<label for="password2">Retype Password:</label>
		<input type="password" id="password2"><br><br>
        <input type="submit" value="Register">
	</form>

	<!-- Create an empty message element for displaying success or error messages -->
	<div id="message"></div>
</body>
</html>
